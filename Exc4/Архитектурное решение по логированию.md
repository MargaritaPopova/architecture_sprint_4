### Мотивация

Внедрение логирования позволит:
- быстро дебажить критические проблемы с заказами
- выявить причины задержек в обработке заказов или задержек на пути заказа от одного сервиса к другому

Логирование положительно повлияет на технические метрики (благодаря быстрому обнаружению ошибок уменьшится их количество, повысится надёжность системы) 
и на бизнес-метрики(удовлетворённость клиентов, удержание клиентов).

### Предлагаемое решение

Логи потребуется отслеживать как минимум из всех апи - магазина, MES и CRM. Так как команда не сможет реализовать 
единовременно логирование и трейсинг всех выделенных для этого систем, для началал можно ограничиться этими тремя 
(при условии, что трейсингом покрыто больше систем, как описано в разделе 3).

Для логов внедряем стек ELK - компоненты отправляют логи в Logstash, оттуда они отправляются в индексы 
Elasticsearch и визуализируютя с помощью Kibana.

Можно настроить, как и в случае с трейсингом, систему алертов. К примеру, если начался спам логов
в апи приема заказов или авторизации - возможно, нас ддосят. Если сыпят логи о 500-ках - это сразу должно
попадать в какой-то мессенджер или другую систему оповещения, чтобы ответственный разработчик расследовал проблему.

### Политика хранения
Логи каждой системы (CRM API, MES API, Shop API) хранятся в отдельных индексах.

Для сроков хранения можно предложить такой вариант:

- Логи за последние 7 дней храним в "горячем" хранилище (SSD) для быстрого доступа.
- Логи старше 7 дней перемещаем в "холодное" хранилище (HDD) и храним до 30 дней.
- Логи старше 30 дней удаляем или архивируем в долгосрочное хранилище.

Все вместе это образует политику ротации индексов (Index Lifecycle Management)

Размеры индекса:
- Лучше установить лимит на размер каждого индекса (например, 50 ГБ). При достижении лимита старые логи должны удаляться
или архивироваться.

### Безопасность

Критические данные (например, номера телефонов, платежные данные) в логах должны быть маскированы.
Логи должны передаваться по защищённым каналам (HTTPS, TLS) между компонентами (Logstash → Elasticsearch)
Доступ к логам должен быть ограничен на основе ролей

ссылка на модель (логирование выделено зеленым): 
https://drive.google.com/file/d/1O3_QBmQY3u3yZpU4J4tyelBtOIU3ZiuR/view?usp=sharing