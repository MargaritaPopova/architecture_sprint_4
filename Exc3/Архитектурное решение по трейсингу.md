### Мотивация

Трейсинг позволит:
- быстро находить этапы, где заказы «зависают» или ломаются (например, медленный расчёт стоимости в MES или ошибки в RabbitMQ).
- выявить проблемы в тех местах, которые не покрыты логами (т.к. обвешивать логами вообще все может быть слишком дорого).
- обеспечить видимость всех этапов обработки заказа, что упростит диагностику проблем.

Внедрение трейсинга позволит улучшить как технические (время обработки, количество ошибок, 
производительность), так и бизнес-метрики (удовлетворённость клиентов, количество успешных заказов, удержание клиентов) - 
так как благодаря трейсингу будут найдены и устранены слабые места архитектуры или алгоритмов расчета.

### Предлагаемое решение

В качестве инструмента предлагаю использовать OpenTelemetry для сбора и передачи трейсов, интегрировав его 
с Jaeger для визуализации.

Для этого предполагается добавить к каждому компоненту системы (интернет-магазин, CRM, MES, RabbitMQ, API) 
свой Tracing Agent - агент для сбора данных.Храниться данные будут в централизованном хранилище Tracing Storage, 
а визуализироваться - в Tracing Dashboard.

Потребуется доработать существующие системы: добавить трейсинг в API интернет-магазина, CRM и MES,
а также по пути следования запросов от внешних пользователей до БД

Для эффективного трейсинга можно собирать следующие данные:

а) идентификаторы (ID заказа, ID оператора, ID продавца...)
б) временные метки (время создания заказа, передачи заказа в CRM, начала и окончания расчёта стоимости в MES,
обновления статуса заказа...)
в) статусы (статусы заказа на каждом этапе и статусы сообщений в RabbitMQ.
г) ошибки (при загрузке 3D-модели, при расчёте стоимости в MES, при передаче сообщений через RabbitMQ...)
д) производительность (время обработки заказа на каждом этапе, количество сообщений в очередях RabbitMQ,
время ответа API для внешних продавцов...)

### Компромиссы
- Если MES или CRM используют проприетарное ПО, может потребоваться дорогостоящая доработка для интеграции с трейсингом.
- Внедрение трейсинга может добавить нагрузку на систему, особенно при высокой частоте запросов.
- Интеграция трейсинга в RabbitMQ и внешние API может потребовать значительных усилий.
- Некоторые системы могут не поддерживать сбор всех необходимых данных для трейсинга (например, время обработки внутри MES).
- Обвешивание всех запросов трейсами может затруднить чтение и поддержку кода, потребовать доработки логики.

### Безопасность

Как и другие компоненты системы, компонент трассировки тоже должен быть защищен авторизацией. Доступ к трейсам должен быть 
открыт только авторизованным пользователям с определенными правами и ролью. Сами трейсы можно хранить
в зашифрованном виде. Доступ к трейсам будет ограничен по IP-адресам корпоративной сети.

ссылка на модель: 
https://drive.google.com/file/d/1NSDoFImxp9lGAsyvjoY_Q8cTcRBYfR8-/view?usp=sharing